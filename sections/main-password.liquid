{%- comment -%}
  LUMINA Theme - Password Page
  Shown when store is password protected
{%- endcomment -%}

<section class="main-password">
  <div class="main-password__container">

    {%- comment -%} Logo/Shop Name {%- endcomment -%}
    <div class="main-password__header">
      {%- if settings.logo != blank -%}
        {{ settings.logo | image_url: width: 200 | image_tag: class: 'main-password__logo', alt: shop.name }}
      {%- else -%}
        <h1 class="main-password__shop-name h2">{{ shop.name }}</h1>
      {%- endif -%}
    </div>

    {%- comment -%} Password Message {%- endcomment -%}
    <div class="main-password__content">
      {%- if shop.password_message != blank -%}
        <div class="main-password__message rte">
          {{ shop.password_message }}
        </div>
      {%- else -%}
        <p class="main-password__message">
          {{ 'general.password_page.login_form_heading' | t }}
        </p>
      {%- endif -%}

      {%- comment -%} Password Form {%- endcomment -%}
      {%- form 'storefront_password', class: 'main-password__form' -%}
        <div class="main-password__field">
          <label for="Password" class="visually-hidden">
            {{ 'general.password_page.login_form_password_label' | t }}
          </label>
          <input
            type="password"
            name="password"
            id="Password"
            class="main-password__input"
            placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}"
            autocomplete="current-password"
            {% if form.errors %}
              aria-invalid="true"
              aria-describedby="password-error"
            {% endif %}
          >
          <button type="submit" class="main-password__submit button">
            {{ 'general.password_page.login_form_submit' | t }}
          </button>
        </div>

        {%- if form.errors -%}
          <p id="password-error" class="main-password__error">
            {{ 'general.password_page.login_form_error' | t }}
          </p>
        {%- endif -%}
      {%- endform -%}

      {%- comment -%} Newsletter Signup (Optional) {%- endcomment -%}
      {%- if section.settings.show_newsletter -%}
        <div class="main-password__newsletter">
          <p class="main-password__newsletter-text">
            {{ section.settings.newsletter_text | default: 'Be the first to know when we launch.' }}
          </p>
          {%- form 'customer', class: 'main-password__newsletter-form' -%}
            <input type="hidden" name="contact[tags]" value="newsletter">
            <div class="main-password__newsletter-field">
              <label for="NewsletterEmail" class="visually-hidden">{{ 'newsletter.email_label' | t }}</label>
              <input
                type="email"
                name="contact[email]"
                id="NewsletterEmail"
                class="main-password__newsletter-input"
                placeholder="{{ 'newsletter.email_placeholder' | t }}"
                autocomplete="email"
                required
              >
              <button type="submit" class="main-password__newsletter-submit button button--secondary">
                {{ 'newsletter.subscribe' | t }}
              </button>
            </div>
          {%- endform -%}
        </div>
      {%- endif -%}
    </div>

    {%- comment -%} Footer {%- endcomment -%}
    <div class="main-password__footer">
      <p class="main-password__powered">
        {{ 'general.password_page.powered_by_shopify_html' | t: shopify: '<a href="https://www.shopify.com" rel="nofollow">Shopify</a>' }}
      </p>
    </div>

  </div>
</section>

<style>
.main-password {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  background: var(--color-background);
}

.main-password__container {
  max-width: 500px;
  width: 100%;
  text-align: center;
}

.main-password__header {
  margin-bottom: 2rem;
}

.main-password__logo {
  max-width: 200px;
  height: auto;
}

.main-password__shop-name {
  margin: 0;
}

.main-password__content {
  margin-bottom: 3rem;
}

.main-password__message {
  margin-bottom: 1.5rem;
  color: var(--color-text-light);
}

.main-password__form {
  margin-bottom: 2rem;
}

.main-password__field {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.main-password__input {
  flex: 1;
  min-width: 200px;
  padding: 0.875rem 1rem;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  font-size: 1rem;
}

.main-password__input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);
}

.main-password__submit {
  white-space: nowrap;
}

.main-password__error {
  color: var(--color-error, #dc3545);
  margin-top: 0.5rem;
  font-size: 0.875rem;
}

.main-password__newsletter {
  padding-top: 2rem;
  border-top: 1px solid var(--color-border);
}

.main-password__newsletter-text {
  margin-bottom: 1rem;
  color: var(--color-text-light);
}

.main-password__newsletter-field {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.main-password__newsletter-input {
  flex: 1;
  min-width: 200px;
  padding: 0.875rem 1rem;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  font-size: 1rem;
}

.main-password__footer {
  color: var(--color-text-light);
  font-size: 0.875rem;
}

.main-password__footer a {
  color: inherit;
}
</style>

{% schema %}
{
  "name": "Password page",
  "tag": "section",
  "class": "section-main-password",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Show newsletter signup",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "Be the first to know when we launch."
    }
  ]
}
{% endschema %}
